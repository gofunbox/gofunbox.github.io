<!DOCTYPE HTML>
<html lang="zh-cn">
<head>
	<meta name="generator" content="Hugo 0.58.3" />
  <meta charset="UTF-8">
  <title>记录点点滴滴</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3, minimum-scale=1">
  <meta name="keywords" content="">
  <meta name="description" content="记录点点滴滴">
  
  <meta itemprop="name" content="记录点点滴滴">
  <meta itemprop="description" content="记录点点滴滴">
  <meta itemprop="image" content="https://gofunbox.github.io/img/author.jpg">
  
  
  <meta name="twitter:description" content="">
  <link rel="alternate" href="https://gofunbox.github.io/feed.xml" title="记录点点滴滴" type="application/rss+xml"/>
  <link rel="shortcut icon" href="https://gofunbox.github.io/img/favicon.ico"/>
  <link rel="apple-touch-icon" href="https://gofunbox.github.io/apple-touch-icon.png" />
  <link rel="apple-touch-icon-precomposed" href="https://gofunbox.github.io/apple-touch-icon.png" />
  <link rel="stylesheet" href="https://gofunbox.github.io/highlight/styles/github.css">
  <script src="https://gofunbox.github.io/highlight/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  
  <link rel="stylesheet" href="https://gofunbox.github.io/font/hack/css/hack.min.css">
  <link rel="stylesheet" href="https://gofunbox.github.io/css/style.css">
</head>

<body>
  <header>
    <div>
  <div id="imglogo">
    <a href="https://gofunbox.github.io/"><img src='https://gofunbox.github.io/img/logo.svg' alt="记录点点滴滴" title="记录点点滴滴"/></a>
  </div>
  <div id="textlogo">
    <h1 class="site-name"><a href="https://gofunbox.github.io/" title="记录点点滴滴">记录点点滴滴</a></h1>
    <h2 class="blog-motto">awesome!</h2>
  </div>
  <div class="navbar"><a class="navbutton navmobile" href="#" title="menu"></a></div>
  <nav class="animated">
    <ul>
      
      <li><a href="/">Home</a></li>
      
      <li>
        <form class="search" method="get" action="https://www.google.com/search">
          <div>
            <input type="text" id="search" name="q" placeholder='Search'>
          </div>
        </form>
      </li>
    </ul>
  </nav>
</div>

  </header>
  <div id="container">
    <div id="main">
      
      <section class="post" itemscope itemprop="blogPost">
    <a href="https://gofunbox.github.io/nginx-ban-ip-access-for-http-https/" title="Nginx配置禁止IP直接HTTP/HTTPS访问" itemprop="url">
    <h1 itemprop="name">Nginx配置禁止IP直接HTTP/HTTPS访问</h1>
    <p itemprop="description">这样配置可以禁止IP直接HTTP/HTTPS访问，也使未绑定的域名无法访问。
#http server { listen 80 default_server; server_name _; return 500; } #https server { listen 443 ssl default_server; server_name _; ssl_certificate /yourpath/ssl.crt; ssl_certificate_key /yourpath/ssl.key; return 500; }  需要配置秘钥 否则会到时全部ssl配置失效 不知道为啥
yum install -y openssl openssl genrsa -des3 -passout pass:x -out ssl.pass.key 2048 openssl rsa -passin pass:x -in ssl.pass.key -out ssl.key openssl req -new -key ssl.key -out ssl.csr …… 一路回车 …… openssl x509 -req -days 3650 -in ssl.csr -signkey ssl.</p>
    <time datetime="2017-12-15 07:08:59 &#43;0000 &#43;0000" itemprop="datePublished">2017-12-15</time>
  </a>
</section>

      
      <section class="post" itemscope itemprop="blogPost">
    <a href="https://gofunbox.github.io/nginx-ssl-performance-optimization/" title="Nginx SSL 性能优化" itemprop="url">
    <h1 itemprop="name">Nginx SSL 性能优化</h1>
    <p itemprop="description">禁用 SSLv3 协议 Google 的一个员工发现了 SSLv3 协议中一个名叫 Poodle 的漏洞，被证实为可以窃取加密的部分信息。这是一个协议层的漏洞，因此无法打补丁。
# nginx.conf http { ... ssl_prefer_server_ciphers on; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_ciphers 'ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:ECDHE-RSA-DES-CBC3-SHA:ECDHE-ECDSA-DES-CBC3-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:AES:CAMELLIA:DES-CBC3-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!aECDH:!EDH-DSS-DES-CBC3-SHA:!EDH-RSA-DES-CBC3-SHA:!KRB5-DES-CBC3-SHA'; ... }  添加 HSTS 响应头 Header HSTS 的 Header 告诉浏览器在指定的时间内，必须使用严格的 HTTPS 访问网站，即使是用户手动输入的 http:// 地址，也会被强制定向。
你也可以配置用 301 重定向 http 流量到 https，但是这个非加密的跳转过程随时可能被劫持。因此，HSTS 则告诉了浏览器在本地直接重定向 https。
在所需网站的 server { } 块儿里，添加这个头：
server { ... add_header Strict-Transport-Security "max-age=31536000;includeSubDomains"; ... } 如果你不需要所有的字域名也强启 HSTS，可以去掉 ;includeSubDomains 。 如果你想将自己的域名加入 HSTS Preload 名单直接内置于众多浏览器中，实现从第一次到最后一次都是 https 加密连接，可以到[这里](https://hstspreload.org/)申请。  更多优化配置 为了缩短建立 SSL 连接的过程时间，可以在 server { } 块儿里添加如下配置：</p>
    <time datetime="2017-12-07 07:41:45 &#43;0000 &#43;0000" itemprop="datePublished">2017-12-07</time>
  </a>
</section>

      
      <section class="post" itemscope itemprop="blogPost">
    <a href="https://gofunbox.github.io/linux-autostart-method/" title="Linux 添加开机启动项的三种方法" itemprop="url">
    <h1 itemprop="name">Linux 添加开机启动项的三种方法</h1>
    <p itemprop="description">linux 添加开机启动项的三种方法。
 编辑文件 /etc/rc.local 输入命令：vim /etc/rc.local 将出现类似如下的文本片段：
#!/bin/sh #
This script will be executed after all the other init scripts. You can put your own initialization stuff in here if you don&rsquo;t want to do the full Sys V style init stuff.  touch /var/lock/subsys/local /etc/init.d/mysqld start #mysql开机启动 /etc/init.d/nginx start #nginx开机启动 /etc/init.d/php-fpm start #php-fpm开机启动 /etc/init.d/memcached start #memcache开机启动
#在文件末尾（exit 0之前）加上你开机需要启动的程序或执行的命令即可（执行的程序需要写绝对路径，添加到系统环境变量的除外），如：
/usr/local/thttpd/sbin/thttpd -C /usr/local/thttpd/etc/thttpd.conf 
 自己写一个shell脚本 将写好的脚本（.sh文件）放到目录 /etc/profile.d/ 下，系统启动后就会自动执行该目录下的所有shell脚本。</p>
    <time datetime="2017-12-06 09:26:00 &#43;0000 &#43;0000" itemprop="datePublished">2017-12-06</time>
  </a>
</section>

      
      <section class="post" itemscope itemprop="blogPost">
    <a href="https://gofunbox.github.io/ascii-unicode-utf8/" title="字符编码简介（ASCII、Unicode、UTF-8）" itemprop="url">
    <h1 itemprop="name">字符编码简介（ASCII、Unicode、UTF-8）</h1>
    <p itemprop="description">字符串也是一种数据类型，但是，字符串比较特殊的是还有一个编码问题。
因为计算机只能处理数字，如果要处理文本，就必须先把文本转换为数字才能处理。最早的计算机在设计时采用8个比特（bit）作为一个字节（byte），所以，一个字节能表示的最大的整数就是255（二进制11111111=十进制255），如果要表示更大的整数，就必须用更多的字节。比如两个字节可以表示的最大整数是65535，4个字节可以表示的最大整数是4294967295。
由于计算机是美国人发明的，因此，最早只有127个字符被编码到计算机里，也就是大小写英文字母、数字和一些符号，这个编码表被称为ASCII编码，比如大写字母A的编码是65，小写字母z的编码是122。
但是要处理中文显然一个字节是不够的，至少需要两个字节，而且还不能和ASCII编码冲突，所以，中国制定了GB2312编码，用来把中文编进去。
你可以想得到的是，全世界有上百种语言，日本把日文编到Shift_JIS里，韩国把韩文编到Euc-kr里，各国有各国的标准，就会不可避免地出现冲突，结果就是，在多语言混合的文本中，显示出来会有乱码。
因此，Unicode应运而生。Unicode把所有语言都统一到一套编码里，这样就不会再有乱码问题了。
Unicode标准也在不断发展，但最常用的是用两个字节表示一个字符（如果要用到非常偏僻的字符，就需要4个字节）。现代操作系统和大多数编程语言都直接支持Unicode。
现在，捋一捋ASCII编码和Unicode编码的区别：ASCII编码是1个字节，而Unicode编码通常是2个字节。
字母A用ASCII编码是十进制的65，二进制的01000001；
字符0用ASCII编码是十进制的48，二进制的00110000，注意字符&#8217;0&#8217;和整数0是不同的；
汉字中已经超出了ASCII编码的范围，用Unicode编码是十进制的20013，二进制的01001110 00101101。
你可以猜测，如果把ASCII编码的A用Unicode编码，只需要在前面补0就可以，因此，A的Unicode编码是00000000 01000001。
新的问题又出现了：如果统一成Unicode编码，乱码问题从此消失了。但是，如果你写的文本基本上全部是英文的话，用Unicode编码比ASCII编码需要多一倍的存储空间，在存储和传输上就十分不划算。
所以，本着节约的精神，又出现了把Unicode编码转化为“可变长编码”的UTF-8编码。UTF-8编码把一个Unicode字符根据不同的数字大小编码成1-6个字节，常用的英文字母被编码成1个字节，汉字通常是3个字节，只有很生僻的字符才会被编码成4-6个字节。如果你要传输的文本包含大量英文字符，用UTF-8编码就能节省空间：
| 字符 | ASCII | Unicode | UTF-8 | | &ndash; | &mdash;&mdash;&ndash; | &mdash;&mdash;&mdash;&mdash;&mdash;&ndash; | &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash; | | A | 01000001 | 00000000 01000001 | 01000001 | | 中 | x | 01001110 00101101 | 11100100 10111000 10101101 |
从上面的表格还可以发现，UTF-8编码有一个额外的好处，就是ASCII编码实际上可以被看成是UTF-8编码的一部分，所以，大量只支持ASCII编码的历史遗留软件可以在UTF-8编码下继续工作。
搞清楚了ASCII、Unicode和UTF-8的关系，我们就可以总结一下现在计算机系统通用的字符编码工作方式：
在计算机内存中，统一使用Unicode编码，当需要保存到硬盘或者需要传输的时候，就转换为UTF-8编码。
用记事本编辑的时候，从文件读取的UTF-8字符被转换为Unicode字符到内存里，编辑完成后，保存的时候再把Unicode转换为UTF-8保存到文件：
浏览网页的时候，服务器会把动态生成的Unicode内容转换为UTF-8再传输到浏览器：
所以你看到很多网页的源码上会有类似的信息，表示该网页正是用的UTF-8编码。
转自 字符编码</p>
    <time datetime="2017-09-04 07:37:26 &#43;0000 &#43;0000" itemprop="datePublished">2017-09-04</time>
  </a>
</section>

      
      <section class="post" itemscope itemprop="blogPost">
    <a href="https://gofunbox.github.io/redis-setnx/" title="谈谈Redis的SETNX" itemprop="url">
    <h1 itemprop="name">谈谈Redis的SETNX</h1>
    <p itemprop="description">在 Redis 里，所谓 SETNX，是「SET if Not eXists」的缩写，也就是只有不存在的时候才设置，可以利用它来实现锁的效果，不过很多人没有意识到 SETNX 有陷阱！
比如说：某个查询数据库的接口，因为调用量比较大，所以加了缓存，并设定缓存过期后刷新，问题是当并发量比较大的时候，如果没有锁机制，那么缓存过期的瞬间，大量并发请求会穿透缓存直接查询数据库，造成雪崩效应，如果有锁机制，那么就可以控制只有一个请求去更新缓存，其它的请求视情况要么等待，要么使用过期的缓存。
下面以目前 PHP 社区里最流行的 PHPRedis 扩展为例，实现一段演示代码：
&lt;?php $ok = $redis-&gt;setNX($key, $value); if ($ok) { $cache-&gt;update(); $redis-&gt;del($key); } ?&gt;  缓存过期时，通过 SetNX 获取锁，如果成功了，那么更新缓存，然后删除锁。看上去逻辑非常简单，可惜有问题：如果请求执行因为某些原因意外退出了，导致创建了锁但是没有删除锁，那么这个锁将一直存在，以至于以后缓存再也得不到更新。于是乎我们需要给锁加一个过期时间以防不测：
&lt;?php $redis-&gt;multi(); $redis-&gt;setNX($key, $value); $redis-&gt;expire($key, $ttl); $redis-&gt;exec(); ?&gt;  因为 SetNX 不具备设置过期时间的功能，所以我们需要借助 Expire 来设置，同时我们需要把两者用 Multi/Exec 包裹起来以确保请求的原子性，以免 SetNX 成功了 Expire 却失败了。 可惜还有问题：当多个请求到达时，虽然只有一个请求的 SetNX 可以成功，但是任何一个请求的 Expire 却都可以成功，如此就意味着即便获取不到锁，也可以刷新过期时间，如果请求比较密集的话，那么过期时间会一直被刷新，导致锁一直有效。于是乎我们需要在保证原子性的同时，有条件的执行 Expire，接着便有了如下 Lua 代码：
local key = KEYS[1] local value = KEYS[2] local ttl = KEYS[3] local ok = redis.</p>
    <time datetime="2017-08-31 03:02:55 &#43;0000 &#43;0000" itemprop="datePublished">2017-08-31</time>
  </a>
</section>

      
      <section class="post" itemscope itemprop="blogPost">
    <a href="https://gofunbox.github.io/vim-guide/" title="Vim 编辑器简单使用教程" itemprop="url">
    <h1 itemprop="name">Vim 编辑器简单使用教程</h1>
    <p itemprop="description">模式切换    当前模式 切换为 按键 说明     其它模式 普通模式 Esc    普通模式 插入模式 i 在光标前插入     I 在行首插入     a 在光标后插入     A 在行末插入     o 在当前行之下新建行     O 在当前行之上新建行     r 替换当前字符     R 从当前字符开始替换   普通模式 命令模式 :    普通模式 可视模式 v 可视模式     V 可视行模式     Ctrl+v 可视块模式    移动 在普通模式中，您可以使用以下方式移动光标</p>
    <time datetime="2017-08-25 06:59:23 &#43;0000 &#43;0000" itemprop="datePublished">2017-08-25</time>
  </a>
</section>

      
      <section class="post" itemscope itemprop="blogPost">
    <a href="https://gofunbox.github.io/automake-and-makefile/" title="自动化编译 如何生成configure和Makefile" itemprop="url">
    <h1 itemprop="name">自动化编译 如何生成configure和Makefile</h1>
    <p itemprop="description">在前面的标准编译安装中，第一步是./configure，它会根据Makefile.in生成Makefile文件，然后make根据Makefile自动编译软件
通常在一个源码包中，已经包含了configure脚本和Makefile文件，作为课外知识，我们大致了解一下怎么生成这两个文件
autoconf autoconf用来生成configure脚本，它可以检查系统特性、编译环境、环境变量、软件参数、依赖关系等
autoconf需要用到 m4
 用autoscan描源代码目录生成configure.scan文件 将configure.scan改名为configure.in 用aclocal根据configure.in文件的内容，自动生成aclocal.m4文件 使用autoconf，根据configure.in和aclocal.m4来产生configure文件  automake automake可以从Makefile.am文件自动生成Makefile.in，它主要用来配置源代码
automake需用到perl
 手工写Makefile.am 使用automake，根据configure.in和Makefile.am来产生Makefile.in  Makefile 使用configure脚本，配合Makefile.in可以生成Makefile文件，然后用make自动化的编译软件
这里有一张生成Makefile的流程图：
Makefile的用途不只是编译软件，还可以利用它完成一些琐碎的工作，只要最后输出一个文件，都可以用make来完成
使用 make 利用 configure所产生的Makefile文件有几个预先设定的目标可供使用：
   目标 用途     make all 产生预设的目标，只敲入make也可以   make clean 清除编译结果   make distclean 除了清除编译结果，也把configure所产生的 Makefile 清除掉   make install 将程序安装到系统中   make dist 将程序和相关的文档打包为一个压缩文档以供发布   make distcheck 打包并检验    详细参考</p>
    <time datetime="2017-08-22 09:54:09 &#43;0000 &#43;0000" itemprop="datePublished">2017-08-22</time>
  </a>
</section>

      
      <section class="post" itemscope itemprop="blogPost">
    <a href="https://gofunbox.github.io/security-https-and-mitm/" title="HTTPS原理以及HTTPS中间人攻击" itemprop="url">
    <h1 itemprop="name">HTTPS原理以及HTTPS中间人攻击</h1>
    <p itemprop="description">https简介 http(Hyper Text Transfer Protocol)超文本传输协议是一种用于分布式、协作式和超媒体信息系统的应用层协议,它是TCP/IP的上层协议,同时它也是万维网(万维网不等同于互联网,它只是基于互联网的一个服务)的数据通信的基础.
http协议是客户端浏览器与其他程序或Web服务器之间交互的应用层通讯协议.但它也有一个致命的缺点:http协议是明文传输协议,在传输信息的过程中并没有进行任何加密,通信的双方也没有任何的认证,这是非常不安全的,如果在通信过程中被中间人进行劫持、监听、篡改,会造成个人隐私泄露等严重的安全问题.
https就是用于解决这样的安全问题的,它的全称为Hypertext Transfer Protocol Secure,它在http的基础上添加了SSL(安全套接字层)层来保证传输数据的安全问题.
https提供了端对端的加密,而且不仅对数据进行了加密,还对数据完整性提供了保护.不过在讲解https的加密方式之前,我们需要先了解一下加密算法.
 对称加密 对称加密的基本思想是: 通信双方使用同一个密钥(或者是两个可以简单地互相推算的密钥)来对明文进行加密与解密.
常见的对称加密算法有DES、3DES、AES、Blowfish、IDEA、RC5、RC6.
  对称加密看起来很美好,但是密钥要怎么发送过去呢?如果直接发送过去,被中间人截获了密钥岂不是白费工夫.&lt;/li&gt; * 非对称加密 非对称加密也叫公开密钥加密,它使用了两个密钥,一个为公钥,一个为私钥,当一个用作于加密的时候,另一个则用作解密. 这两个密钥就算被其他人知道了其中一个也不能凭借它计算出另一个密钥,所以可以公开其中一个密钥(也就是公钥),不公开的密钥为私钥.   如果服务器想发送消息给客户端,只需要用客户端的公钥加密,然后客户端用它自己的私钥进行解密. 常见的非对称加密算法有RSA、DSA、ECDSA、 DH、ECDHE. 我们以DH算法为例,了解一下非对称加密的魅力.  
对称加密与非对称加密结合使用的方法虽然能够保证了通信过程的安全,但也引发了如下问题: * 客户端要如何获取到服务器的公钥? * 如果公钥在发送过程被中间人拦截,然后中间人发送自己的公钥给客户端,客户端该如何确认? 解决方法依是通过一个权威的CA(Certificate Authority)证书中心, * * * ## CA (Certificate Authority证书颁发机构) 它来负责颁发证书（声明这个公钥确实是服务端的）,这个证书包含了如下等内容: * 证书的发布机构. * 证书的有效期 * 公钥 * 证书所有人 * 数字签名 数字签名是用来验证数据完整性的，首先将公钥与个人信息用一个Hash算法生成一个消息摘要，Hash算法是不可逆的，且只要内容发生变化，那生成的消息摘要将会截然不同。然后CA再用它的私钥对消息摘要加密，最终形成数字签名。还把原始信息和数据签名合并，形成一个全新的东西，叫做“数字证书”  当客户端接收到证书时,只需要用同样的Hash算法再次生成一个消息摘要,然后用CA的公钥对证书进行解密,之后再对比两个消息摘要就能知道数据有没有被篡改过了.  那么CA的公钥又要从哪里来呢？这似乎陷入了一个鸡生蛋,蛋生鸡的悖论，其实CA也有证书来证明自己，而且CA证书的信用体系就像一棵树的结构，上层节点是信用高的CA同时它也会对底层的CA做信用背书，操作系统／浏览器中会内置一些顶层的CA的证书，相当于你自动信任了他们。这样通过各级实体证书的验证，逐渐上溯到链的终止点，即可信任的根CA，如果到达终点在自己的信任列表内未发现可信任的CA则认为此证书不可信。  验证证书链的时候，用上一级的公钥对证书里的签名进行解密，还原对应的摘要值，再使用证书信息计算证书的摘要值，最后通过对比两个摘要值是否相等，如果不相等则认为该证书不可信，如果相等则认为该级证书链正确，以此类推对整个证书链进行校验，引用高性能网络中的证书链校验图。 * * * ## Https的交互过程   1.</p>
    <time datetime="2017-08-16 03:15:35 &#43;0000 &#43;0000" itemprop="datePublished">2017-08-16</time>
  </a>
</section>

      
      <section class="post" itemscope itemprop="blogPost">
    <a href="https://gofunbox.github.io/centos-cli-mailx/" title="CentOS CLI命令行mailx发送邮件基本用法" itemprop="url">
    <h1 itemprop="name">CentOS CLI命令行mailx发送邮件基本用法</h1>
    <p itemprop="description">mailx安装，很简单！貌似我的系统自带的。
yum install mailx #安装 yum remove mailx #卸载系统自带的旧版mailx 编译安装mailx： http://nchc.dl.sourceforge.net/project/heirloom/heirloom-mailx/12.4/mailx-12.4.tar.bz2 tar jxvf mailx-12.4.tar.bz2 #解压 cd mailx-12.4 #进入目录 make #编译 make install UCBINSTALL=/usr/bin/install #安装 ln -s /usr/local/bin/mailx /bin/mail #创建mailx到mail的软连接 ln -s /etc/nail.rc /etc/mail.rc #创建mailx配置文件软连接  我先介绍下系统的版本和mailx的版本
[root@localhost ~]# mailx -V 12.4 7/29/08 [root@localhost ~]# cat /etc/issue CentOS release 6.8 (Final) Kernel \r on an \m  mailx的配置文件在/etc/mail.rc
在配置文件中添加下面的代码（passwd写开通smtp客户端给的授权码）
set from=111******53@qq.com set smtp=smtp.qq.com set smtp-auth-user=111******53@qq.com set smtp-auth-password=euia********chb #授权码 set smtp-auth=login  直接报错了(没有使用ssl的节奏)</p>
    <time datetime="2017-08-15 06:50:01 &#43;0000 &#43;0000" itemprop="datePublished">2017-08-15</time>
  </a>
</section>

      
      <section class="post" itemscope itemprop="blogPost">
    <a href="https://gofunbox.github.io/php-curl-https-error-77-problem-with-reading-the-ssl-ca-cert/" title="解决PHP curl https时error 77(Problem with reading the SSL CA cert (path? access rights?))" itemprop="url">
    <h1 itemprop="name">解决PHP curl https时error 77(Problem with reading the SSL CA cert (path? access rights?))</h1>
    <p itemprop="description">问题 服务器环境为CentOS，php-fpm，使用curl一个https站时失败，打开curl_error，捕获错误：Problem with reading the SSL CA cert (path? access rights?)
解决方案：  sudo yum install ca-certificates （无论有没有，安装确认一下） 重启php-fpm，这步比较重要，更改底层的东西时一定要重启一下 curl时设置：curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0)  相关知识点 什么是CA Certificates？ Certification authority (CA)
证书颁发机构（Certification authority 简称CA）证书是由CA向其自身或二级CA颁发的证书，用于在两个CA之间创建一个定义的关系。
由CA颁发给自己的证书称为受信任的根证书，因为它旨在为CA层次结构建立最终信任点。
一旦信任的根建立起来，它就可以用来授权下属的CA代表它颁发证书。
虽然CA之间的关系最常见是层次化的，CA证书也可以用于在两个不同的公钥基础设施（Public Key Infrastructure缩写PKI）层次结构中建立CA之间的信任关系。
在所有这些情况下，CA证书对于为PKI中使用的所有终端实体证书定义证书路径和使用限制至关重要。
CA证书解决的问题 当终端实体使用证书时，必须在终端实体证书和根CA之间验证信任关系。
根CA和终端实体证书之间的信任关系是通过验证证书链中所有证书的内容直到根CA来验证的。
为PKI建立的准则和程序定义了信任。这包括终端实体证书用于某些目的并阻止用于其他目的的能力。这些准则和程序以多种方式实施。例如，PKI的信任和安全可以通过两种方式建立：
 为确保承载CA的服务器的物理安全性而采取的步骤。 委派CA的管理角色的方式。  但是，针对组织需求的CA证书的适当配置是组织必须实施适当PKI安全性的最强大的工具之一。CA证书包含用于规范其颁发的CA的特殊配置数据。
这些配置选项可以：
 定义组织命名空间，由其发布和信任下属CA颁发的证书。 指定由下属CA颁发的证书的可接受使用。 定义必须遵循的发布准则，以便下属CA颁发的证书被视为有效。 在单独的认证层次之间创建一个托管信任。  参考
https://technet.microsoft.com/en-us/library/cc778623(v=ws.10).aspx</p>
    <time datetime="2017-08-08 01:51:30 &#43;0000 &#43;0000" itemprop="datePublished">2017-08-08</time>
  </a>
</section>

      
      <nav id="page-nav" class="clearfix">
        <a class="page-number" href="https://gofunbox.github.io/post/">More...</a>
      </nav>
    </div>
    <div class="openaside"><a class="navbutton" href="#" title=""></a></div>
<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title=""></a></div>
<aside class="clearfix">
  

<div class="categorieslist">
  <p class="asidetitle">Categories</p>
  <ul>
    
    <li><a href="https://gofunbox.github.io/categories/dedecms" title="dedecms">dedecms<sup>1</sup></a></li>
    
    <li><a href="https://gofunbox.github.io/categories/discuz" title="discuz">discuz<sup>4</sup></a></li>
    
    <li><a href="https://gofunbox.github.io/categories/hack" title="hack">hack<sup>6</sup></a></li>
    
    <li><a href="https://gofunbox.github.io/categories/html" title="html">html<sup>5</sup></a></li>
    
    <li><a href="https://gofunbox.github.io/categories/linux" title="linux">linux<sup>19</sup></a></li>
    
    <li><a href="https://gofunbox.github.io/categories/php" title="php">php<sup>53</sup></a></li>
    
    <li><a href="https://gofunbox.github.io/categories/seo" title="seo">seo<sup>13</sup></a></li>
    
    <li><a href="https://gofunbox.github.io/categories/shopex" title="shopex">shopex<sup>17</sup></a></li>
    
    <li><a href="https://gofunbox.github.io/categories/shopnc" title="shopnc">shopnc<sup>3</sup></a></li>
    
    <li><a href="https://gofunbox.github.io/categories/thinkphp" title="thinkphp">thinkphp<sup>3</sup></a></li>
    
    <li><a href="https://gofunbox.github.io/categories/wordpress" title="wordpress">wordpress<sup>5</sup></a></li>
    
    <li><a href="https://gofunbox.github.io/categories/zencart" title="zencart">zencart<sup>9</sup></a></li>
    
    <li><a href="https://gofunbox.github.io/categories/%e4%b8%aa%e4%ba%ba%e6%9d%82%e8%b0%88" title="个人杂谈">个人杂谈<sup>2</sup></a></li>
    
    <li><a href="https://gofunbox.github.io/categories/%e6%80%a7%e8%83%bd%e4%bc%98%e5%8c%96" title="性能优化">性能优化<sup>9</sup></a></li>
    
    <li><a href="https://gofunbox.github.io/categories/%e6%95%b0%e6%8d%ae%e5%ba%93" title="数据库">数据库<sup>15</sup></a></li>
    
    <li><a href="https://gofunbox.github.io/categories/%e6%9c%8d%e5%8a%a1%e5%99%a8" title="服务器">服务器<sup>33</sup></a></li>
    
    <li><a href="https://gofunbox.github.io/categories/%e7%89%88%e6%9c%ac%e7%ae%a1%e7%90%86%e5%b7%a5%e5%85%b7" title="版本管理工具">版本管理工具<sup>5</sup></a></li>
    
  </ul>
</div>



  

<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
      
			<li><a href="https://gofunbox.github.io/tags/html" title="html">html<sup>1</sup></a></li>
      
			<li><a href="https://gofunbox.github.io/tags/javascript" title="javascript">javascript<sup>1</sup></a></li>
      
			<li><a href="https://gofunbox.github.io/tags/jenkins" title="jenkins">jenkins<sup>1</sup></a></li>
      
			<li><a href="https://gofunbox.github.io/tags/linux" title="linux">linux<sup>9</sup></a></li>
      
			<li><a href="https://gofunbox.github.io/tags/lua" title="lua">lua<sup>2</sup></a></li>
      
			<li><a href="https://gofunbox.github.io/tags/mysql" title="mysql">mysql<sup>3</sup></a></li>
      
			<li><a href="https://gofunbox.github.io/tags/nginx" title="nginx">nginx<sup>7</sup></a></li>
      
			<li><a href="https://gofunbox.github.io/tags/osx" title="osx">osx<sup>1</sup></a></li>
      
			<li><a href="https://gofunbox.github.io/tags/php" title="php">php<sup>3</sup></a></li>
      
			<li><a href="https://gofunbox.github.io/tags/ssl" title="ssl">ssl<sup>5</sup></a></li>
      
			<li><a href="https://gofunbox.github.io/tags/vmware" title="vmware">vmware<sup>1</sup></a></li>
      
		</ul>
</div>



  
  <div class="archiveslist">
    <p class="asidetitle">Archives</p>
    <ul class="archive-list">
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2017-12">2017年12月</a><span class="archive-list-count">3</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2017-09">2017年09月</a><span class="archive-list-count">1</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2017-08">2017年08月</a><span class="archive-list-count">9</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2017-07">2017年07月</a><span class="archive-list-count">5</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2016-11">2016年11月</a><span class="archive-list-count">2</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2016-10">2016年10月</a><span class="archive-list-count">1</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2016-09">2016年09月</a><span class="archive-list-count">1</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2016-06">2016年06月</a><span class="archive-list-count">1</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2016-04">2016年04月</a><span class="archive-list-count">1</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2016-03">2016年03月</a><span class="archive-list-count">3</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2015-12">2015年12月</a><span class="archive-list-count">1</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2015-11">2015年11月</a><span class="archive-list-count">1</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2015-10">2015年10月</a><span class="archive-list-count">4</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2015-09">2015年09月</a><span class="archive-list-count">2</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2015-08">2015年08月</a><span class="archive-list-count">2</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2015-04">2015年04月</a><span class="archive-list-count">2</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2015-03">2015年03月</a><span class="archive-list-count">1</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2015-02">2015年02月</a><span class="archive-list-count">3</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2015-01">2015年01月</a><span class="archive-list-count">3</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2014-12">2014年12月</a><span class="archive-list-count">3</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2014-11">2014年11月</a><span class="archive-list-count">2</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2014-10">2014年10月</a><span class="archive-list-count">2</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2014-08">2014年08月</a><span class="archive-list-count">3</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2014-06">2014年06月</a><span class="archive-list-count">4</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2014-05">2014年05月</a><span class="archive-list-count">4</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2014-04">2014年04月</a><span class="archive-list-count">1</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2014-03">2014年03月</a><span class="archive-list-count">4</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2014-02">2014年02月</a><span class="archive-list-count">4</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2013-11">2013年11月</a><span class="archive-list-count">2</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2013-10">2013年10月</a><span class="archive-list-count">3</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2013-09">2013年09月</a><span class="archive-list-count">3</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2013-08">2013年08月</a><span class="archive-list-count">2</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2013-07">2013年07月</a><span class="archive-list-count">6</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2013-06">2013年06月</a><span class="archive-list-count">4</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2013-05">2013年05月</a><span class="archive-list-count">4</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2013-04">2013年04月</a><span class="archive-list-count">1</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2013-03">2013年03月</a><span class="archive-list-count">8</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2013-02">2013年02月</a><span class="archive-list-count">10</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2013-01">2013年01月</a><span class="archive-list-count">1</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2012-11">2012年11月</a><span class="archive-list-count">2</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2012-10">2012年10月</a><span class="archive-list-count">1</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2012-09">2012年09月</a><span class="archive-list-count">2</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2012-07">2012年07月</a><span class="archive-list-count">1</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2012-05">2012年05月</a><span class="archive-list-count">5</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2012-04">2012年04月</a><span class="archive-list-count">3</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2012-03">2012年03月</a><span class="archive-list-count">2</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2012-02">2012年02月</a><span class="archive-list-count">2</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2012-01">2012年01月</a><span class="archive-list-count">7</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2011-11">2011年11月</a><span class="archive-list-count">15</span>
      </li>
      
      
      <li class="archive-list-item">
        <a class="archive-list-link" href="https://gofunbox.github.io/post/#2011-10">2011年10月</a><span class="archive-list-count">16</span>
      </li>
      
    </ul>

  </div>


  

<div class="tagcloudlist">
  <p class="asidetitle">Tags Cloud</p>
  <div class="tagcloudlist clearfix">
    
    <a href="https://gofunbox.github.io/tags/html" style="font-size: 12px;">html</a>
    
    <a href="https://gofunbox.github.io/tags/javascript" style="font-size: 12px;">javascript</a>
    
    <a href="https://gofunbox.github.io/tags/jenkins" style="font-size: 12px;">jenkins</a>
    
    <a href="https://gofunbox.github.io/tags/linux" style="font-size: 12px;">linux</a>
    
    <a href="https://gofunbox.github.io/tags/lua" style="font-size: 12px;">lua</a>
    
    <a href="https://gofunbox.github.io/tags/mysql" style="font-size: 12px;">mysql</a>
    
    <a href="https://gofunbox.github.io/tags/nginx" style="font-size: 12px;">nginx</a>
    
    <a href="https://gofunbox.github.io/tags/osx" style="font-size: 12px;">osx</a>
    
    <a href="https://gofunbox.github.io/tags/php" style="font-size: 12px;">php</a>
    
    <a href="https://gofunbox.github.io/tags/ssl" style="font-size: 12px;">ssl</a>
    
    <a href="https://gofunbox.github.io/tags/vmware" style="font-size: 12px;">vmware</a>
    
  </div>
</div>



  
<div class="rsspart">
  <a rel="nofollow" href="https://gofunbox.github.io/feed.xml" type="application/rss+xml" target="_blank"></a>
</div>


</aside>
</div>

  </div>
  <footer><div id="footer" >
  <div class="line">
    <span></span>
    
    <div style='background:no-repeat url("https://gofunbox.github.io/img/author.jpg") left top;-webkit-background-size:6.875em 6.875em;-moz-background-size:6.875em 6.875em;background-size:6.875em 6.875em;' class="author" ></div>
  </div>
  <section class="info">
    <p></p>
  </section>
  <div class="social-font clearfix">
    <a href='http://weibo.com/coderzh' target="_blank" title="weibo"></a>
    <a href='https://twitter.com/coderzh' target="_blank" title="twitter"></a>
    <a href='https://github.com/coderzh' target="_blank" title="github"></a>
    <a href='https://www.facebook.com/coderzh' target="_blank" title="facebook"></a>
    <a href='https://www.linkedin.com/coderzh' target="_blank" title="linkedin"></a>
  </div>
  <p class="copyright">Powered by <a href="http://gohugo.io" target="_blank" title="hugo">hugo</a> and Theme by <a href="https://github.com/coderzh/hugo-pacman-theme" target="_blank" title="hugo-pacman-theme">hugo-pacman-theme</a> © 2020
    
    <a href="https://gofunbox.github.io/" title="记录点点滴滴">记录点点滴滴</a>
    
  </p>
</div>
</footer>
  <script src="https://gofunbox.github.io/js/jquery-2.1.0.min.js"></script>
<script type="text/javascript">
done = false;
$(document).ready(function(){
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize();
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  $('form.search').on('submit', function (event) {
    if (false === done) {
      event.preventDefault();
      var orgVal = $(this).find('#search').val();
      $(this).find('#search').val('site:https:\/\/gofunbox.github.io\/ ' + orgVal);
      done = true;
      $(this).submit();
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#share"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://b.bshare.cn/barCode?site=weixin&url=' + encodedUrl + '"/></div>',
  '<a href="#textlogo" class="article-back-to-top" title="Top"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="QRcode"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="Weibo"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
});
</script>





</body>
</html>
